---
title: 数据库设计
date: 2019-01-05 22:06:55
updated: 2019-01-05 22:06:55
tags:
categories:
- 数据库
---


# 数据库三范式
~~~
1.一张表内列不能重复
2.每张表要有主键，防止行重复
3.表中不能存在不是其他表主键的列，防止冗余。
~~~

# 设计原则
~~~
再设计数据库时，每张表代表一个实体，再根据实体与实体的关系是一对一/一对多/多对多的关系设计数据库。
想好是如何使用表的，如何增删改查，数据库优化，orm代码是否方便书写。
~~~

# 数据库设计时画ER图会使逻辑更清晰
~~~
构成E-R图的基本要素是实体型、属性和联系，其表示方法为：

==实体型(Entity)：具有相同属性的实体具有相同的特征和性质，用实体名及其属性名集合来抽象和刻画同类实体;在E-R图中用矩形表示，矩形框内写明实体名；
比如学生张三、学生李四都是实体。如果是弱实体的话，在矩形外面再套实线矩形。

==属性(Attribute)：实体所具有的某一特性，一个实体可由若干个属性来刻画。在E-R图中用椭圆形表示，并用无向边将其与相应的实体连接起来；
比如学生的姓名、学号、性别、都是属性。如果是多值属性的话，在椭圆形外面再套实线椭圆。如果是派生属性则用虚线椭圆表示。

==联系(Relationship)：联系也称关系，信息世界中反映实体内部或实体之间的联系。实体内部的联系通常是指组成实体的各属性之间的联系；
实体之间的联系通常是指不同实体集之间的联系。在E-R图中用菱形表示，菱形框内写明联系名，并用无向边分别与有关实体连接起来，
同时在无向边旁标上联系的类型（1 : 1，1 : n或m : n）。比如老师给学生授课存在授课关系，学生选课存在选课关系。如果是弱实体的联系则在菱形外面再套菱形。
联系可分为以下 3 种类型：
(1) 一对一联系(1 ∶1)
例如，一个部门有一个经理，而每个经理只在一个部门任职，则部门与经理的联系是一对一的。
(2) 一对多联系(1 ∶N)
例如，某校教师与课程之间存在一对多的联系“教”，即每位教师可以教多门课程，但是每门课程只能由一位教师来教
(3) 多对多联系(M ∶N)
例如，学生“ 学” 某门课程所取得的成绩，既不是学生的属性也不是课程的属性。由于“ 成绩” 既依赖于某名特定的学生又依赖于某门特定的课程，
所以它是学生与课程之间的联系“ 学”的属性。

==弱实体：有时某些实体对于另一些实体有很强的依赖关系，即一个实体的存在必须以另一实体的存在为前提。前者就称为“弱实体”，后者称为“强实体”。
比如在人事管理系统中，职工子女的信息就是以职工的存在为前提的，子女实体是弱实体，子女与职工的联系是一种依赖联系。
弱实体用双线矩形框表示，与弱实体的联系用双线菱形框表示。
注意：强实体与弱实体的联系只能是1：1或1：N。弱实体参与联系时应该是“完全参与”，因此弱实体与联系间的联系也画成双线边。
~~~

![Er图](Er图.png)

